{% extends "layouts/question.njk" %}

{% if scheme.name %}
  {# Editing an existing scheme #}
  {% set caption = scheme.name %}
  {% set title = "Service details" %}
  {% set formAction = schemePath + "/update-your-answers" %}
  {% set hasAnsweredQuestion = true %}
  {% set buttonText = "Continue" %}
{% else %}
  {% set title = "Create a new supported housing service" %}
{% endif %}

{% block question %}
  {{ macro.heading(title, caption) }}

  {{ govukInput({
    decorate: ["schemes", scheme.id, "organisationId"],
    value: organisationId,
    type: "hidden"
  }) }}

  {{ govukInput({
    decorate: ["schemes", scheme.id, "name"],
    formGroup: {
      classes: "govuk-!-margin-bottom-4"
    },
    label: {
      classes: "govuk-label--m",
      text: "Service name"
    },
    spellcheck: false
  }) }}

  {{ govukCheckboxes({
    decorate: ["schemes", scheme.id, "confidential"],
    items: [{
      value: "true",
      text: "This service contains confidential information"
    }]
  }) }}

  {# Ideally show radio options if number of organisations is less than 10 #}
  {# govukRadios({
    decorate: ["schemes", scheme.id, "agentId"],
    fieldset: {
      legend: {
        classes: "govuk-label--m",
        text: "Which organisation manages this service?"
      }
    },
    allowEmpty: true,
    showNoOptionsFound: true,
    items: managedOrganisations | optionItems
  }) #}

  {{ appAutocomplete(decorate({
    label: {
      classes: "govuk-label--m",
      html: "Which organisation manages this service?"
    },
    hint: {
      text: "Enter organisation name"
    },
    allowEmpty: true,
    showNoOptionsFound: true,
    items: managedOrganisations | optionItems
  }, ["schemes", scheme.id, "agentId"])) }}

  {{ govukRadios({
    decorate: ["schemes", scheme.id, "type"],
    fieldset: {
      legend: {
        classes: "govuk-fieldset__legend--m",
        text: "What is this type of service?"
      }
    },
    items: data.questions["type-of-scheme"]
  }) }}

  {{ govukRadios({
    decorate: ["schemes", scheme.id, "registered-home"],
    fieldset: {
      legend: {
        classes: "govuk-fieldset__legend--m",
        text: "Is this service registered under the Care Standards Act 2000?"
      }
    },
    items: data.questions["registered-home"]
  }) }}

  {{ govukInput({
    decorate: ["schemes", scheme.id, "units"],
    classes: "govuk-input--width-2",
    hint: {
      text: "Do not include units or bedrooms for wardens, managers, volunteers or sleep-in staff."
    },
    label: {
      classes: "govuk-label--m",
      text: "Total number of units or bedrooms"
    },
    inputmode: "numeric",
    pattern: "[0-9]*",
    spellcheck: false
  }) }}
{% endblock %}
